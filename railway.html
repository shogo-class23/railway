<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>鉄道総合案内システム - Railway Portal</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #1abc9c;
            --danger: #e74c3c;
            --light: #f8f9fa;
        }

        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            margin: 0;
            background-color: #f0f2f5;
            color: #333;
        }

        header {
            background-color: var(--primary);
            color: white;
            padding: 1.5rem;
            text-align: center;
        }

        nav {
            background-color: #34495e;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav button {
            background: none;
            border: none;
            color: white;
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-size: 0.95rem;
            transition: background 0.3s;
        }

        nav button:hover, nav button.active {
            background-color: var(--secondary);
        }

        .container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .page {
            display: none;
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .page.active {
            display: block;
        }

        h2 {
            border-left: 6px solid var(--secondary);
            padding-left: 15px;
            margin-top: 0;
            color: var(--primary);
        }

        /* 乗換案内 フォーム */
        .search-box {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .input-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 1.5rem;
        }

        .input-group label {
            display: block;
            font-size: 0.85rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: #666;
        }

        input[type="text"], select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1rem;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            background: white;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #eee;
        }

        .radio-group label {
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            font-weight: bold;
        }

        .btn-search {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 12px;
            width: 100%;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
        }

        /* 乗換案内 結果 (垂直スタック) */
        .result-card {
            border: 2px solid #edf2f7;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .result-time { font-size: 1.5rem; font-weight: bold; color: var(--primary); }

        .vertical-timeline {
            display: flex;
            flex-direction: column !important; /* 強制垂直 */
            gap: 0;
            padding-left: 30px;
            border-left: 4px solid #e2e8f0;
            margin-left: 15px;
        }

        .step-node {
            position: relative;
            padding-bottom: 30px;
            display: flex;
            flex-direction: column;
        }

        .step-node::before {
            content: '';
            position: absolute;
            left: -37px;
            top: 5px;
            width: 14px;
            height: 14px;
            background: white;
            border: 4px solid #cbd5e0;
            border-radius: 50%;
            z-index: 10;
        }

        .step-label {
            font-size: 0.75rem;
            font-weight: bold;
            color: #ed8936;
            margin-bottom: 4px;
        }

        /* 乗る駅 */
        .step-boarding .station-name { font-size: 1.2rem; font-weight: bold; }
        .step-boarding::before { border-color: var(--secondary); background: var(--secondary); }

        /* 経由駅 (他より小さく) */
        .step-via { padding-bottom: 20px; margin-top: -10px; }
        .step-via .station-name {
            font-size: 0.8rem !important; /* 強制縮小 */
            color: #718096 !important;
            font-weight: normal !important;
        }
        .step-via::before { width: 10px; height: 10px; left: -35px; background: #cbd5e0; border: none; }

        /* 降りる駅 (最大・赤) */
        .step-alighting { padding-bottom: 0; margin-top: 10px; }
        .step-alighting .station-name {
            font-size: 1.8rem !important; /* 最大強調 */
            font-weight: 900 !important;
            color: var(--danger) !important;
        }
        .step-alighting::before {
            border-color: var(--danger);
            background: var(--danger);
            width: 18px;
            height: 18px;
            left: -39px;
            top: 10px;
        }

        .step-info { display: flex; align-items: baseline; gap: 10px; }
        .step-time { color: #666; font-size: 0.9rem; }

        /* 路線図 SVG */
        .map-svg {
            width: 100%;
            height: auto;
            background: #f8fafc;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        /* 運行情報 */
        .status-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 8px solid #ccc;
            background: #f9f9f9;
        }
    </style>
</head>
<body>

<header>
    <h1>鉄道総合案内システム</h1>
</header>

<nav id="nav">
    <button onclick="showPage('status')" class="active">運行情報</button>
    <button onclick="showPage('timetable')">時刻表</button>
    <button onclick="showPage('fare')">運賃検索</button>
    <button onclick="showPage('stationMap')">構内図</button>
    <button onclick="showPage('routeMap')">路線図</button>
    <button onclick="showPage('ticket')">切符購入</button>
    <button onclick="showPage('transfer')">乗換案内</button>
</nav>

<div class="container">
    <!-- 運行情報 -->
    <section id="status" class="page active">
        <h2>運行情報</h2>
        <div class="status-item" style="border-left-color: var(--secondary);"><strong>本線</strong>: 平常運転</div>
        <div class="status-item" style="border-left-color: #f1c40f;"><strong>地下鉄線</strong>: 遅延 (15分)</div>
        <div class="status-item" style="border-left-color: var(--danger);"><strong>特急線</strong>: 運転見合わせ</div>
    </section>

    <!-- 乗換案内 -->
    <section id="transfer" class="page">
        <h2>乗換案内</h2>
        <div class="search-box">
            <div class="input-row">
                <div class="input-group"><label>出発駅</label><input type="text" id="tFrom" value="東京"></div>
                <div class="input-group"><label>経由駅</label><input type="text" id="tVia" placeholder="任意"></div>
                <div class="input-group"><label>降りる駅</label><input type="text" id="tTo" value="新宿"></div>
            </div>
            <div class="input-row" style="grid-template-columns: 100px 100px 1fr;">
                <div class="input-group"><label>時</label><select id="tHour"></select></div>
                <div class="input-group"><label>分</label><select id="tMin"></select></div>
                <div></div>
            </div>
            <div class="radio-group">
                <label><input type="radio" name="tType" value="出発" checked> 出発</label>
                <label><input type="radio" name="tType" value="到着"> 到着</label>
                <label><input type="radio" name="tType" value="始発"> 始発</label>
                <label><input type="radio" name="tType" value="終電"> 終電</label>
            </div>
            <button class="btn-search" onclick="doSearch()">検索ボタン</button>
        </div>
        <div id="transferResults"></div>
    </section>

    <!-- 路線図 -->
    <section id="routeMap" class="page">
        <h2>路線図 (仮)</h2>
        <svg class="map-svg" viewBox="0 0 500 250">
            <!-- 路線 -->
            <line x1="50" y1="125" x2="450" y2="125" stroke="#2ecc71" stroke-width="8" />
            <line x1="250" y1="30" x2="250" y2="220" stroke="#3498db" stroke-width="8" />
            <!-- 駅 -->
            <circle cx="50" cy="125" r="8" fill="white" stroke="#2ecc71" stroke-width="4" />
            <text x="30" y="160" font-size="12" font-weight="bold">西駅</text>
            
            <circle cx="250" cy="125" r="10" fill="white" stroke="#333" stroke-width="5" />
            <text x="235" y="160" font-size="14" font-weight="bold">中央駅</text>
            
            <circle cx="450" cy="125" r="8" fill="white" stroke="#2ecc71" stroke-width="4" />
            <text x="430" y="160" font-size="12" font-weight="bold">東駅</text>
            
            <circle cx="250" cy="30" r="8" fill="white" stroke="#3498db" stroke-width="4" />
            <text x="265" y="35" font-size="12" font-weight="bold">北駅</text>
            
            <circle cx="250" cy="220" r="8" fill="white" stroke="#3498db" stroke-width="4" />
            <text x="265" y="225" font-size="12" font-weight="bold">南駅</text>
        </svg>
    </section>

    <!-- 他のページ (プレースホルダー) -->
    <section id="timetable" class="page"><h2>時刻表</h2><p>駅名を入力して検索してください。</p></section>
    <section id="fare" class="page"><h2>運賃検索</h2></section>
    <section id="stationMap" class="page"><h2>構内図</h2></section>
    <section id="ticket" class="page"><h2>切符購入</h2></section>
</div>

<script>
    // 初期化
    const h = document.getElementById('tHour');
    const m = document.getElementById('tMin');
    for(let i=0; i<24; i++) h.innerHTML += `<option value="${i}">${i.toString().padStart(2,'0')}</option>`;
    for(let i=0; i<60; i++) m.innerHTML += `<option value="${i}">${i.toString().padStart(2,'0')}</option>`;
    h.value = 12;

    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        const btn = Array.from(document.querySelectorAll('nav button')).find(b => b.onclick.toString().includes(id));
        if(btn) btn.classList.add('active');
    }

    function doSearch() {
        const from = document.getElementById('tFrom').value;
        const to = document.getElementById('tTo').value;
        const via = document.getElementById('tVia').value;
        const hour = document.getElementById('tHour').value.padStart(2,'0');
        const min = document.getElementById('tMin').value.padStart(2,'0');
        const type = document.querySelector('input[name="tType"]:checked').value;

        if(!from || !to) return alert('駅名を入力してください');

        const startTime = `${hour}:${min}`;
        const endTime = "12:45"; // ダミー到着

        document.getElementById('transferResults').innerHTML = `
            <div class="result-card">
                <div class="result-header">
                    <div class="result-time">${startTime} ～ ${endTime}</div>
                    <div style="display:flex; gap:5px;">
                        <span style="background:var(--danger); color:white; padding:2px 8px; border-radius:4px; font-size:0.8rem; font-weight:bold;">早</span>
                        <span style="background:#3498db; color:white; padding:2px 8px; border-radius:4px; font-size:0.8rem; font-weight:bold;">楽</span>
                        <span style="background:#2ecc71; color:white; padding:2px 8px; border-radius:4px; font-size:0.8rem; font-weight:bold;">安</span>
                    </div>
                </div>
                <div style="margin-bottom:20px; color:#555;">
                    所要時間: <strong>45分</strong> / 運賃: <strong>650円</strong> (${type}指定)
                </div>
                <div class="vertical-timeline">
                    <div class="step-node step-boarding">
                        <div class="step-label">【乗る場所】</div>
                        <div class="step-info">
                            <span class="station-name">${from}</span>
                            <span class="step-time">${startTime}発</span>
                        </div>
                    </div>
                    <div class="step-node step-via">
                        <div class="step-label">【経由場所】</div>
                        <div class="step-info">
                            <span class="station-name">${via || "中央駅"}</span>
                            <span class="step-time">乗換</span>
                        </div>
                    </div>
                    <div class="step-node step-alighting">
                        <div class="step-label">【降りる場所】</div>
                        <div class="step-info">
                            <span class="station-name">${to}</span>
                            <span class="step-time">${endTime}着</span>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }
</script>

</body>
</html>
