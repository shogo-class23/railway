<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>鉄道総合案内システム</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #1abc9c;
            --danger: #e74c3c;
            --bg: #f4f7f6;
        }

        body { font-family: sans-serif; background-color: var(--bg); margin: 0; padding: 0; color: #333; }
        header { background: var(--primary); color: white; text-align: center; padding: 20px; }
        nav { background: #34495e; text-align: center; sticky: top; }
        nav button { background: none; border: none; color: white; padding: 15px 20px; cursor: pointer; font-size: 0.9rem; }
        nav button.active { background: var(--secondary); }

        .container { max-width: 800px; margin: 20px auto; padding: 0 15px; }
        .page { display: none; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .page.active { display: block; }

        h2 { border-bottom: 3px solid var(--secondary); padding-bottom: 5px; color: var(--primary); }

        /* フォーム */
        .search-form { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        .input-row { margin-bottom: 15px; }
        .input-row label { display: block; font-size: 0.8rem; font-weight: bold; margin-bottom: 5px; }
        input[type="text"], select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        .type-options { margin: 15px 0; }
        .type-options label { margin-right: 15px; font-weight: bold; cursor: pointer; }

        .btn-search { background: var(--secondary); color: white; border: none; padding: 15px; width: 100%; border-radius: 6px; font-size: 1.1rem; font-weight: bold; cursor: pointer; }

        /* --- 乗換案内 結果 (絶対垂直レイアウト) --- */
        .route-box { border: 4px solid #f0f2f5; border-radius: 15px; padding: 25px; margin-top: 30px; }
        .route-time-header { border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px; }
        .time-range-text { font-size: 1.8rem; font-weight: bold; color: var(--primary); display: block; }

        .vertical-station-list { padding-left: 40px; border-left: 6px solid #eee; margin-left: 20px; margin-top: 20px; }

        /* 確実に垂直にするために display: block を連発 */
        .station-item { display: block !important; width: 100% !important; clear: both !important; position: relative; margin-bottom: 40px; }
        .station-item::before { content: ''; position: absolute; left: -51px; top: 10px; width: 16px; height: 16px; background: white; border: 5px solid #ccc; border-radius: 50%; }

        .role-tag { display: block !important; font-size: 0.7rem; font-weight: bold; color: #e67e22; margin-bottom: 5px; }
        .station-name-text { display: block !important; line-height: 1.1; }
        .time-info-text { display: block !important; font-size: 0.9rem; color: #888; margin-top: 8px; }

        /* 乗る駅 */
        .boarding-station .station-name-text { font-size: 1.4rem; font-weight: bold; }
        .boarding-station::before { border-color: var(--secondary); background: var(--secondary); }

        /* 経由駅 (極小) */
        .via-station { margin-top: -20px; padding-bottom: 20px; }
        .via-station .station-name-text { font-size: 0.65rem !important; color: #bbb !important; font-weight: normal !important; }
        .via-station .role-tag, .via-station .time-info-text { font-size: 0.55rem !important; color: #ddd !important; }
        .via-station::before { width: 8px; height: 8px; left: -47px; top: 8px; background: #eee; border: none; }

        /* 降りる駅 (最大・赤・極太) */
        .alighting-station { margin-top: 10px; }
        .alighting-station .station-name-text { font-size: 2.8rem !important; font-weight: 900 !important; color: var(--danger) !important; letter-spacing: -2px; }
        .alighting-station::before { width: 22px; height: 22px; left: -55px; top: 15px; background: var(--danger); border-color: var(--danger); }

        /* 路線図 */
        .route-map-svg { width: 100%; height: auto; border: 1px solid #ddd; background: #fff; border-radius: 8px; }

        /* 共通ページ要素 */
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #eee; padding: 12px; text-align: center; }
        th { background: var(--primary); color: white; }
    </style>
</head>
<body>

<header><h1>鉄道総合案内システム</h1></header>

<nav>
    <button onclick="showPage('status')" class="active">運行情報</button>
    <button onclick="showPage('timetable')">時刻表</button>
    <button onclick="showPage('routeMap')">路線図</button>
    <button onclick="showPage('transfer')">乗換案内</button>
</nav>

<div class="container">
    <section id="status" class="page active">
        <h2>運行情報</h2>
        <div style="padding:15px; border-left:8px solid var(--secondary); background:#f9f9f9; margin-bottom:10px;"><strong>本線</strong>: 平常運転</div>
    </section>

    <section id="timetable" class="page">
        <h2>時刻表</h2>
        <table><tr><th>列車</th><th>行先</th><th>時刻</th></tr><tr><td>急行</td><td>東駅</td><td>12:05</td></tr></table>
    </section>

    <section id="routeMap" class="page">
        <h2>路線図</h2>
        <svg class="route-map-svg" viewBox="0 0 500 200">
            <line x1="50" y1="100" x2="450" y2="100" stroke="#2ecc71" stroke-width="10" />
            <text x="35" y="135" font-weight="bold">西駅</text>
            <text x="230" y="145" font-weight="bold" font-size="20">中央駅</text>
            <text x="430" y="135" font-weight="bold">東駅</text>
        </svg>
    </section>

    <section id="transfer" class="page">
        <h2>乗換案内</h2>
        <div class="search-form">
            <div class="input-row"><label>出発駅</label><input type="text" id="fromSt" value="東京"></div>
            <div class="input-row"><label>経由駅</label><input type="text" id="viaSt" placeholder="任意"></div>
            <div class="input-row"><label>降りる駅</label><input type="text" id="toSt" value="新宿"></div>
            <div class="input-row" style="display:flex; gap:10px;">
                <select id="hSel" style="width:70px;"></select>時
                <select id="mSel" style="width:70px;"></select>分
            </div>
            <div class="type-options">
                <label><input type="radio" name="stype" value="出発" checked>出発</label>
                <label><input type="radio" name="stype" value="到着">到着</label>
                <label><input type="radio" name="stype" value="始発">始発</label>
                <label><input type="radio" name="stype" value="終電">終電</label>
            </div>
            <button class="btn-search" onclick="search()">ルートを検索</button>
        </div>
        <div id="transferResults"></div>
    </section>
</div>

<script>
    const hs = document.getElementById('hSel');
    const ms = document.getElementById('mSel');
    for(let i=0; i<24; i++) hs.innerHTML += `<option value="${i}">${i.toString().padStart(2,'0')}</option>`;
    for(let i=0; i<60; i++) ms.innerHTML += `<option value="${i}">${i.toString().padStart(2,'0')}</option>`;
    hs.value = 12;

    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        const activeBtn = Array.from(document.querySelectorAll('nav button')).find(b => b.textContent.includes(document.querySelector(`#${id} h2`).textContent));
        if(activeBtn) activeBtn.classList.add('active');
    }

    function search() {
        const from = document.getElementById('fromSt').value;
        const via = document.getElementById('viaSt').value;
        const to = document.getElementById('toSt').value;
        const time = `${hs.value.padStart(2,'0')}:${ms.value.padStart(2,'0')}`;
        const type = document.querySelector('input[name="stype"]:checked').value;

        if(!from || !to) return alert('駅名を入力してください');

        document.getElementById('transferResults').innerHTML = `
            <div class="route-box">
                <div class="route-time-header">
                    <span class="time-range-text">${time} 発 ～ 12:45 着</span>
                </div>
                <div style="margin-bottom:20px; font-weight:bold; color:#2980b9;">
                    所要時間: 45分 / 運賃: 650円 / 条件: ${type}
                </div>
                <div class="vertical-station-list">
                    <div class="station-item boarding-station">
                        <span class="role-tag">【乗る場所】</span>
                        <span class="station-name-text">${from}</span>
                        <span class="time-info-text">${time} 発</span>
                    </div>
                    <div class="station-item via-station">
                        <span class="role-tag">【経由場所】</span>
                        <span class="station-name-text">${via || "中央駅"}</span>
                        <span class="time-info-text">乗換 5分</span>
                    </div>
                    <div class="station-item alighting-station">
                        <span class="role-tag">【降りる場所】</span>
                        <span class="station-name-text">${to}</span>
                        <span class="time-info-text">12:45 着</span>
                    </div>
                </div>
            </div>
        `;
    }
</script>
</body>
</html>
